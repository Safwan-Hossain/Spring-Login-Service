<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>

    <script src="https://kit.fontawesome.com/318e4ccccd.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/static/stylesheets/registration.css" th:href="@{/stylesheets/registration.css}"/>
</head>
<body>
    <div class="page">
        <form th:action="@{/login}" method="post" class="login-form">
            <h1>üîê Spring Login Service </h1>
            <div class="form-group">
                <label>Email:</label>
                <input type="email" name="username" placeholder="Enter your email" />
            </div>
            <div class="form-group">
                <label>Password:</label>
                <input type="password" name="password" placeholder="Enter your password" />
            </div>
            <div class="form-group">
                <button type="submit">Login</button>
            </div>

            <div class="feedback error" th:if="${param.error}">
                Invalid username or password.
            </div>
            <div class="feedback logout" th:if="${param.logout}">
                You have been logged out.
            </div>
        </form>

        <div class="register-redirect">
            <p>Don't have an account? <a th:href="@{/registration}">Register here</a></p>
        </div>
        <div class="project-info-icons">
            <button type="button" id="openModal" class="icon-btn" title="How to use" aria-label="How to use">
                <i class="fas fa-question-circle"></i>
            </button>
            <a href="https://github.com/Safwan-Hossain/Spring-Login-Service"
               class="icon-btn"
               title="View on GitHub"
               aria-label="View on GitHub"
               target="_blank"
               rel="noopener">
                <i class="fab fa-github"></i>
            </a>
        </div>

    </div>

    <div class="modal-overlay" id="infoModal">
        <div class="modal-content">
            <button class="close-btn" id="closeModal" title="Close">&times;</button>
            <h2>Spring Boot Login Demo</h2>
            <p>
                A Spring Boot web application featuring secure login, email verification, and MVC design with Thymeleaf.
            </p>

            <div class="note" style="margin-top: 1.25rem;">
                <strong>How to use:</strong>
                <ol class="note-list">
                    <li>Click "Register here" to create an account</li>
                    <li>Confirm your email via the link provided</li>
                    <li>Log in to view your user dashboard</li>
                </ol>
            </div>
        </div>
    </div>


    <script>
        const modal = document.getElementById("infoModal");
        const openBtn = document.getElementById("openModal");
        const closeBtn = document.getElementById("closeModal");

        function openModal() {
          modal.style.display = "flex";
          document.body.style.overflow = "hidden";
        }

        function closeModal() {
          modal.style.display = "none";
          document.body.style.overflow = "";
        }

        openBtn.addEventListener("click", openModal);
        openBtn.addEventListener("touchstart", openModal, { passive: true });

        closeBtn.addEventListener("click", closeModal);
        closeBtn.addEventListener("touchstart", closeModal, { passive: true });

        modal.addEventListener("click", (e) => {
          if (e.target === modal) closeModal();
        });

        modal.addEventListener("touchstart", (e) => {
          if (e.target === modal) closeModal();
        }, { passive: true });

        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && modal.style.display === "flex") {
            closeModal();
          }
        });

    </script>

</body>

</html>
